"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/facilities";
exports.ids = ["pages/api/facilities"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffacilities&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffacilities%2Findex.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffacilities&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffacilities%2Findex.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_facilities_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/facilities/index.ts */ \"(api)/./pages/api/facilities/index.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_facilities_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_facilities_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/facilities\",\n        pathname: \"/api/facilities\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_facilities_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmZhY2lsaXRpZXMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmZhY2lsaXRpZXMlMkZpbmRleC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUM0RDtBQUM1RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsMkRBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDJEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdHRvby1vbnNlbi1wb3J0YWwvP2FkNDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9mYWNpbGl0aWVzL2luZGV4LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZmFjaWxpdGllc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2ZhY2lsaXRpZXNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffacilities&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffacilities%2Findex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = global.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) global.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQVF0QyxNQUFNQyxTQUFTQyxPQUFPRCxNQUFNLElBQUksSUFBSUQsd0RBQVlBLEdBQUU7QUFDekQsSUFBSUcsSUFBeUIsRUFBY0QsT0FBT0QsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdHRvby1vbnNlbi1wb3J0YWwvLi9saWIvcHJpc21hLnRzPzk4MjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgLy8gYWxsb3cgZ2xvYmFsIGB2YXJgIHRvIGtlZXAgdGhlIHByaXNtYSBpbnN0YW5jZSBhY3Jvc3MgaG90IHJlbG9hZHMgaW4gZGV2XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby12YXJcbiAgdmFyIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWwucHJpc21hIHx8IG5ldyBQcmlzbWFDbGllbnQoKVxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbC5wcmlzbWEgPSBwcmlzbWFcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJwcmlzbWEiLCJnbG9iYWwiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/prisma.ts\n");

/***/ }),

/***/ "(api)/./pages/api/facilities/index.ts":
/*!***************************************!*\
  !*** ./pages/api/facilities/index.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createFacilitiesHandler: () => (/* binding */ createFacilitiesHandler),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/prisma */ \"(api)/./lib/prisma.ts\");\n\nfunction createFacilitiesHandler(db) {\n    return async function handler(req, res) {\n        try {\n            if (req.method === \"GET\") {\n                const { prefecture, city, keyword, tags, page = \"1\", pageSize = \"10\" } = req.query;\n                const where = {\n                    status: \"approved\"\n                };\n                if (prefecture) where.prefecture = String(prefecture);\n                if (city) where.city = String(city);\n                // Build OR conditions for keyword and tags\n                const orConditions = [];\n                if (keyword) {\n                    const k = String(keyword);\n                    orConditions.push({\n                        name: {\n                            contains: k\n                        }\n                    }, {\n                        description: {\n                            contains: k\n                        }\n                    }, {\n                        tags: {\n                            contains: k\n                        }\n                    });\n                }\n                if (tags) {\n                    const t = String(tags).split(\",\").map((s)=>s.trim()).filter(Boolean);\n                    t.forEach((tag)=>{\n                        orConditions.push({\n                            tags: {\n                                contains: tag\n                            }\n                        });\n                    });\n                }\n                // Only add OR clause if there are conditions\n                if (orConditions.length > 0) {\n                    where.OR = orConditions;\n                }\n                const p = Math.max(1, parseInt(String(page), 10) || 1);\n                const ps = Math.max(1, Math.min(100, parseInt(String(pageSize), 10) || 10));\n                const skip = (p - 1) * ps;\n                const [total, items] = await Promise.all([\n                    db.facility.count({\n                        where\n                    }),\n                    db.facility.findMany({\n                        where,\n                        skip,\n                        take: ps,\n                        orderBy: {\n                            createdAt: \"desc\"\n                        }\n                    })\n                ]);\n                // If pagination was requested, return structured response; otherwise return array for simplicity\n                const isPagingRequested = Boolean(req.query.page || req.query.pageSize);\n                if (isPagingRequested) {\n                    res.status(200).json({\n                        items,\n                        total,\n                        page: p,\n                        pageSize: ps\n                    });\n                } else {\n                    res.status(200).json(items);\n                }\n                return;\n            }\n            res.setHeader(\"Allow\", [\n                \"GET\"\n            ]);\n            res.status(405).end(`Method ${req.method} Not Allowed`);\n        } catch (e) {\n            console.error(e);\n            res.status(500).json({\n                error: \"server_error\"\n            });\n        }\n    };\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createFacilitiesHandler(_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNGO1lBQ2RsRCxJQUFJVSxNQUFNLENBQUMsS0FBS3FDLElBQUksQ0FBQztnQkFBRUssT0FBTztZQUFlO1FBQy9DO0lBQ0Y7QUFDRjtBQUVBLGlFQUFleEQsd0JBQXdCRCwrQ0FBTUEsQ0FBQ0EsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdHRvby1vbnNlbi1wb3J0YWwvLi9wYWdlcy9hcGkvZmFjaWxpdGllcy9pbmRleC50cz9hZDMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuLi8uLi8uLi9saWIvcHJpc21hJ1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRmFjaWxpdGllc0hhbmRsZXIoZGI6IGFueSkge1xuICByZXR1cm4gYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICAgIHRyeSB7XG4gICAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICAgICAgY29uc3QgeyBwcmVmZWN0dXJlLCBjaXR5LCBrZXl3b3JkLCB0YWdzLCBwYWdlID0gJzEnLCBwYWdlU2l6ZSA9ICcxMCcgfSA9IHJlcS5xdWVyeVxuICAgICAgICBjb25zdCB3aGVyZTogYW55ID0geyBzdGF0dXM6ICdhcHByb3ZlZCcgfVxuICAgICAgICBpZiAocHJlZmVjdHVyZSkgd2hlcmUucHJlZmVjdHVyZSA9IFN0cmluZyhwcmVmZWN0dXJlKVxuICAgICAgICBpZiAoY2l0eSkgd2hlcmUuY2l0eSA9IFN0cmluZyhjaXR5KVxuXG4gICAgICAgIC8vIEJ1aWxkIE9SIGNvbmRpdGlvbnMgZm9yIGtleXdvcmQgYW5kIHRhZ3NcbiAgICAgICAgY29uc3Qgb3JDb25kaXRpb25zOiBhbnlbXSA9IFtdXG4gICAgICAgIGlmIChrZXl3b3JkKSB7XG4gICAgICAgICAgY29uc3QgayA9IFN0cmluZyhrZXl3b3JkKVxuICAgICAgICAgIG9yQ29uZGl0aW9ucy5wdXNoKFxuICAgICAgICAgICAgeyBuYW1lOiB7IGNvbnRhaW5zOiBrIH0gfSxcbiAgICAgICAgICAgIHsgZGVzY3JpcHRpb246IHsgY29udGFpbnM6IGsgfSB9LFxuICAgICAgICAgICAgeyB0YWdzOiB7IGNvbnRhaW5zOiBrIH0gfVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFncykge1xuICAgICAgICAgIGNvbnN0IHQgPSBTdHJpbmcodGFncykuc3BsaXQoJywnKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pXG4gICAgICAgICAgdC5mb3JFYWNoKCh0YWc6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgb3JDb25kaXRpb25zLnB1c2goeyB0YWdzOiB7IGNvbnRhaW5zOiB0YWcgfSB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgLy8gT25seSBhZGQgT1IgY2xhdXNlIGlmIHRoZXJlIGFyZSBjb25kaXRpb25zXG4gICAgICAgIGlmIChvckNvbmRpdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHdoZXJlLk9SID0gb3JDb25kaXRpb25zXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwID0gTWF0aC5tYXgoMSwgcGFyc2VJbnQoU3RyaW5nKHBhZ2UpLCAxMCkgfHwgMSlcbiAgICAgICAgY29uc3QgcHMgPSBNYXRoLm1heCgxLCBNYXRoLm1pbigxMDAsIHBhcnNlSW50KFN0cmluZyhwYWdlU2l6ZSksIDEwKSB8fCAxMCkpXG4gICAgICAgIGNvbnN0IHNraXAgPSAocCAtIDEpICogcHNcblxuICAgICAgICBjb25zdCBbdG90YWwsIGl0ZW1zXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICBkYi5mYWNpbGl0eS5jb3VudCh7IHdoZXJlIH0pLFxuICAgICAgICAgIGRiLmZhY2lsaXR5LmZpbmRNYW55KHsgd2hlcmUsIHNraXAsIHRha2U6IHBzLCBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0gfSlcbiAgICAgICAgXSlcblxuICAgICAgICAvLyBJZiBwYWdpbmF0aW9uIHdhcyByZXF1ZXN0ZWQsIHJldHVybiBzdHJ1Y3R1cmVkIHJlc3BvbnNlOyBvdGhlcndpc2UgcmV0dXJuIGFycmF5IGZvciBzaW1wbGljaXR5XG4gICAgICAgIGNvbnN0IGlzUGFnaW5nUmVxdWVzdGVkID0gQm9vbGVhbihyZXEucXVlcnkucGFnZSB8fCByZXEucXVlcnkucGFnZVNpemUpXG4gICAgICAgIGlmIChpc1BhZ2luZ1JlcXVlc3RlZCkge1xuICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgaXRlbXMsIHRvdGFsLCBwYWdlOiBwLCBwYWdlU2l6ZTogcHMgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihpdGVtcylcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgWydHRVQnXSlcbiAgICAgIHJlcy5zdGF0dXMoNDA1KS5lbmQoYE1ldGhvZCAke3JlcS5tZXRob2R9IE5vdCBBbGxvd2VkYClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnc2VydmVyX2Vycm9yJyB9KVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVGYWNpbGl0aWVzSGFuZGxlcihwcmlzbWEpXG4iXSwibmFtZXMiOlsicHJpc21hIiwiY3JlYXRlRmFjaWxpdGllc0hhbmRsZXIiLCJkYiIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJwcmVmZWN0dXJlIiwiY2l0eSIsImtleXdvcmQiLCJ0YWdzIiwicGFnZSIsInBhZ2VTaXplIiwicXVlcnkiLCJ3aGVyZSIsInN0YXR1cyIsIlN0cmluZyIsIm9yQ29uZGl0aW9ucyIsImsiLCJwdXNoIiwibmFtZSIsImNvbnRhaW5zIiwiZGVzY3JpcHRpb24iLCJ0Iiwic3BsaXQiLCJtYXAiLCJzIiwidHJpbSIsImZpbHRlciIsIkJvb2xlYW4iLCJmb3JFYWNoIiwidGFnIiwibGVuZ3RoIiwiT1IiLCJwIiwiTWF0aCIsIm1heCIsInBhcnNlSW50IiwicHMiLCJtaW4iLCJza2lwIiwidG90YWwiLCJpdGVtcyIsIlByb21pc2UiLCJhbGwiLCJmYWNpbGl0eSIsImNvdW50IiwiZmluZE1hbnkiLCJ0YWtlIiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsImlzUGFnaW5nUmVxdWVzdGVkIiwianNvbiIsInNldEhlYWRlciIsImVuZCIsImUiLCJjb25zb2xlIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/facilities/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffacilities&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffacilities%2Findex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();