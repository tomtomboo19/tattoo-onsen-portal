"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/facilities";
exports.ids = ["pages/api/facilities"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffacilities&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffacilities%2Findex.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffacilities&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffacilities%2Findex.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_facilities_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/facilities/index.ts */ \"(api)/./pages/api/facilities/index.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_facilities_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_facilities_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/facilities\",\n        pathname: \"/api/facilities\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_facilities_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmZhY2lsaXRpZXMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmZhY2lsaXRpZXMlMkZpbmRleC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUM0RDtBQUM1RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsMkRBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDJEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdHRvby1vbnNlbi1wb3J0YWwvP2FkNDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9mYWNpbGl0aWVzL2luZGV4LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZmFjaWxpdGllc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2ZhY2lsaXRpZXNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffacilities&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffacilities%2Findex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = global.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) global.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQVF0QyxNQUFNQyxTQUFTQyxPQUFPRCxNQUFNLElBQUksSUFBSUQsd0RBQVlBLEdBQUU7QUFDekQsSUFBSUcsSUFBeUIsRUFBY0QsT0FBT0QsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdHRvby1vbnNlbi1wb3J0YWwvLi9saWIvcHJpc21hLnRzPzk4MjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgLy8gYWxsb3cgZ2xvYmFsIGB2YXJgIHRvIGtlZXAgdGhlIHByaXNtYSBpbnN0YW5jZSBhY3Jvc3MgaG90IHJlbG9hZHMgaW4gZGV2XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby12YXJcbiAgdmFyIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWwucHJpc21hIHx8IG5ldyBQcmlzbWFDbGllbnQoKVxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbC5wcmlzbWEgPSBwcmlzbWFcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJwcmlzbWEiLCJnbG9iYWwiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/prisma.ts\n");

/***/ }),

/***/ "(api)/./pages/api/facilities/index.ts":
/*!***************************************!*\
  !*** ./pages/api/facilities/index.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createFacilitiesHandler: () => (/* binding */ createFacilitiesHandler),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/prisma */ \"(api)/./lib/prisma.ts\");\n\nfunction createFacilitiesHandler(db) {\n    return async function handler(req, res) {\n        try {\n            if (req.method === \"GET\") {\n                const { prefecture, city, keyword, tags, page = \"1\", pageSize = \"10\" } = req.query;\n                const where = {\n                    status: \"approved\"\n                };\n                if (prefecture) where.prefecture = String(prefecture);\n                if (city) where.city = String(city);\n                if (keyword) {\n                    const k = String(keyword);\n                    where.OR = [\n                        {\n                            name: {\n                                contains: k\n                            }\n                        },\n                        {\n                            description: {\n                                contains: k\n                            }\n                        },\n                        {\n                            tags: {\n                                contains: k\n                            }\n                        }\n                    ];\n                }\n                // tags: optional comma separated values, match any\n                if (tags) {\n                    const t = String(tags).split(\",\").map((s)=>s.trim()).filter(Boolean);\n                    if (t.length > 0) {\n                        where.OR = [\n                            ...where.OR || [],\n                            ...t.map((tag)=>({\n                                    tags: {\n                                        contains: tag\n                                    }\n                                }))\n                        ];\n                    }\n                }\n                const p = Math.max(1, parseInt(String(page), 10) || 1);\n                const ps = Math.max(1, Math.min(100, parseInt(String(pageSize), 10) || 10));\n                const skip = (p - 1) * ps;\n                const [total, items] = await Promise.all([\n                    db.facility.count({\n                        where\n                    }),\n                    db.facility.findMany({\n                        where,\n                        skip,\n                        take: ps,\n                        orderBy: {\n                            createdAt: \"desc\"\n                        }\n                    })\n                ]);\n                // If pagination was requested, return structured response; otherwise return array for simplicity\n                const isPagingRequested = Boolean(req.query.page || req.query.pageSize);\n                if (isPagingRequested) {\n                    res.status(200).json({\n                        items,\n                        total,\n                        page: p,\n                        pageSize: ps\n                    });\n                } else {\n                    res.status(200).json(items);\n                }\n                return;\n            }\n            res.setHeader(\"Allow\", [\n                \"GET\"\n            ]);\n            res.status(405).end(`Method ${req.method} Not Allowed`);\n        } catch (e) {\n            console.error(e);\n            res.status(500).json({\n                error: \"server_error\"\n            });\n        }\n    };\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createFacilitiesHandler(_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTSxDQUFDLEtBQUtrQyxJQUFJLENBQUM7Z0JBQUVLLE9BQU87WUFBZTtRQUMvQztJQUNGO0FBQ0Y7QUFFQSxpRUFBZXJELHdCQUF3QkQsK0NBQU1BLENBQUNBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXR0b28tb25zZW4tcG9ydGFsLy4vcGFnZXMvYXBpL2ZhY2lsaXRpZXMvaW5kZXgudHM/YWQzMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0J1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnLi4vLi4vLi4vbGliL3ByaXNtYSdcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZhY2lsaXRpZXNIYW5kbGVyKGRiOiBhbnkpIHtcbiAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XG4gICAgICAgIGNvbnN0IHsgcHJlZmVjdHVyZSwgY2l0eSwga2V5d29yZCwgdGFncywgcGFnZSA9ICcxJywgcGFnZVNpemUgPSAnMTAnIH0gPSByZXEucXVlcnlcbiAgICAgICAgY29uc3Qgd2hlcmU6IGFueSA9IHsgc3RhdHVzOiAnYXBwcm92ZWQnIH1cbiAgICAgICAgaWYgKHByZWZlY3R1cmUpIHdoZXJlLnByZWZlY3R1cmUgPSBTdHJpbmcocHJlZmVjdHVyZSlcbiAgICAgICAgaWYgKGNpdHkpIHdoZXJlLmNpdHkgPSBTdHJpbmcoY2l0eSlcbiAgICAgICAgaWYgKGtleXdvcmQpIHtcbiAgICAgICAgICBjb25zdCBrID0gU3RyaW5nKGtleXdvcmQpXG4gICAgICAgICAgd2hlcmUuT1IgPSBbXG4gICAgICAgICAgICB7IG5hbWU6IHsgY29udGFpbnM6IGsgfSB9LFxuICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogeyBjb250YWluczogayB9IH0sXG4gICAgICAgICAgICB7IHRhZ3M6IHsgY29udGFpbnM6IGsgfSB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICAgIC8vIHRhZ3M6IG9wdGlvbmFsIGNvbW1hIHNlcGFyYXRlZCB2YWx1ZXMsIG1hdGNoIGFueVxuICAgICAgICBpZiAodGFncykge1xuICAgICAgICAgIGNvbnN0IHQgPSBTdHJpbmcodGFncykuc3BsaXQoJywnKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pXG4gICAgICAgICAgaWYgKHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgd2hlcmUuT1IgPSBbLi4uKHdoZXJlLk9SIHx8IFtdKSwgLi4udC5tYXAoKHRhZzogc3RyaW5nKSA9PiAoeyB0YWdzOiB7IGNvbnRhaW5zOiB0YWcgfSB9KSldXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcCA9IE1hdGgubWF4KDEsIHBhcnNlSW50KFN0cmluZyhwYWdlKSwgMTApIHx8IDEpXG4gICAgICAgIGNvbnN0IHBzID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oMTAwLCBwYXJzZUludChTdHJpbmcocGFnZVNpemUpLCAxMCkgfHwgMTApKVxuICAgICAgICBjb25zdCBza2lwID0gKHAgLSAxKSAqIHBzXG5cbiAgICAgICAgY29uc3QgW3RvdGFsLCBpdGVtc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgZGIuZmFjaWxpdHkuY291bnQoeyB3aGVyZSB9KSxcbiAgICAgICAgICBkYi5mYWNpbGl0eS5maW5kTWFueSh7IHdoZXJlLCBza2lwLCB0YWtlOiBwcywgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9IH0pXG4gICAgICAgIF0pXG5cbiAgICAgICAgLy8gSWYgcGFnaW5hdGlvbiB3YXMgcmVxdWVzdGVkLCByZXR1cm4gc3RydWN0dXJlZCByZXNwb25zZTsgb3RoZXJ3aXNlIHJldHVybiBhcnJheSBmb3Igc2ltcGxpY2l0eVxuICAgICAgICBjb25zdCBpc1BhZ2luZ1JlcXVlc3RlZCA9IEJvb2xlYW4ocmVxLnF1ZXJ5LnBhZ2UgfHwgcmVxLnF1ZXJ5LnBhZ2VTaXplKVxuICAgICAgICBpZiAoaXNQYWdpbmdSZXF1ZXN0ZWQpIHtcbiAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGl0ZW1zLCB0b3RhbCwgcGFnZTogcCwgcGFnZVNpemU6IHBzIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oaXRlbXMpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsIFsnR0VUJ10pXG4gICAgICByZXMuc3RhdHVzKDQwNSkuZW5kKGBNZXRob2QgJHtyZXEubWV0aG9kfSBOb3QgQWxsb3dlZGApXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihlKVxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ3NlcnZlcl9lcnJvcicgfSlcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlRmFjaWxpdGllc0hhbmRsZXIocHJpc21hKVxuIl0sIm5hbWVzIjpbInByaXNtYSIsImNyZWF0ZUZhY2lsaXRpZXNIYW5kbGVyIiwiZGIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwicHJlZmVjdHVyZSIsImNpdHkiLCJrZXl3b3JkIiwidGFncyIsInBhZ2UiLCJwYWdlU2l6ZSIsInF1ZXJ5Iiwid2hlcmUiLCJzdGF0dXMiLCJTdHJpbmciLCJrIiwiT1IiLCJuYW1lIiwiY29udGFpbnMiLCJkZXNjcmlwdGlvbiIsInQiLCJzcGxpdCIsIm1hcCIsInMiLCJ0cmltIiwiZmlsdGVyIiwiQm9vbGVhbiIsImxlbmd0aCIsInRhZyIsInAiLCJNYXRoIiwibWF4IiwicGFyc2VJbnQiLCJwcyIsIm1pbiIsInNraXAiLCJ0b3RhbCIsIml0ZW1zIiwiUHJvbWlzZSIsImFsbCIsImZhY2lsaXR5IiwiY291bnQiLCJmaW5kTWFueSIsInRha2UiLCJvcmRlckJ5IiwiY3JlYXRlZEF0IiwiaXNQYWdpbmdSZXF1ZXN0ZWQiLCJqc29uIiwic2V0SGVhZGVyIiwiZW5kIiwiZSIsImNvbnNvbGUiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/facilities/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffacilities&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffacilities%2Findex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();